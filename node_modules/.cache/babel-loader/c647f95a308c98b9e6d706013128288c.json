{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"/Volumes/document/GitHub/ASM3/Frontend Assignment 03/admin_shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Volumes/document/GitHub/ASM3/Frontend Assignment 03/admin_shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Volumes/document/GitHub/ASM3/Frontend Assignment 03/admin_shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useRef,useState}from\"react\";import socketIOClient from\"socket.io-client\";import MessengerAPI from\"../API/MessengerAPI\";import\"./Chat.css\";import axios from\"axios\";var host=\"https://asm3-be-4qtm.onrender.com/\";function Chat(){var _message$content;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),message=_useState2[0],setMessage=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),textMessage=_useState4[0],setTextMessage=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),roomlist=_useState6[0],setRoomslist=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),load=_useState8[0],setLoad=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),id=_useState10[0],setid=_useState10[1];var socketRef=useRef();useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"\".concat(host,\"/mess/get/all\"));case 3:res=_context.sent;setRoomslist(res.data);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.error(\"Error fetching data:\",_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();},[]);var onChangeText=function onChangeText(e){setTextMessage(e.target.value);};var fetchMessageData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(value){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return MessengerAPI.getMessageId(value||id);case 3:response=_context2.sent;setMessage(response.data);_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);console.error(\"Error fetching messages:\",_context2.t0);case 10:case\"end\":return _context2.stop();}}},_callee2,null,[[0,7]]);}));return function fetchMessageData(_x){return _ref2.apply(this,arguments);};}();var handleIdUser=function handleIdUser(value){connectToSocket();setid(value);fetchMessageData(value);};var connectToSocket=function connectToSocket(){socketRef.current=socketIOClient.connect(host);socketRef.current.on(\"receive_message\",function(){setLoad(true);});return function(){socketRef.current.disconnect();};};var handleSend=function handleSend(){if(socketRef.current&&textMessage.trim()!==\"\"){var value={content:textMessage,id:id,name:localStorage.getItem(\"name_user\"),isAdmin:true};socketRef.current.emit(\"send_message\",value);setTextMessage(\"\");setLoad(true);}};useEffect(function(){fetchMessageData();setLoad(false);},[load]);return/*#__PURE__*/_jsxs(\"div\",{className:\"page-wrapper\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"page-breadcrumb\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-7 align-self-center\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"page-title text-truncate text-dark font-weight-medium mb-1\",children:\"Chat\"}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex align-items-center\",children:/*#__PURE__*/_jsx(\"nav\",{\"aria-label\":\"breadcrumb\",children:/*#__PURE__*/_jsxs(\"ol\",{className:\"breadcrumb m-0 p-0\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"breadcrumb-item text-muted active\",\"aria-current\":\"page\",children:\"Apps\"}),/*#__PURE__*/_jsx(\"li\",{className:\"breadcrumb-item text-muted\",\"aria-current\":\"page\",children:\"Chat\"})]})})})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-md-12\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row no-gutters\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-lg-3 col-xl-2 border-right\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-body border-bottom\",children:/*#__PURE__*/_jsx(\"form\",{children:/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",type:\"text\",placeholder:\"Search Contact\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"scrollable position-relative\",style:{height:\"calc(80vh - 100px)\"},children:/*#__PURE__*/_jsx(\"ul\",{className:\"mailbox list-style-none\",children:/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"message-center\",children:roomlist&&(roomlist===null||roomlist===void 0?void 0:roomlist.map(function(value){return/*#__PURE__*/_jsxs(\"a\",{onClick:function onClick(){return handleIdUser(value.id_user);},className:\"message-item d-flex align-items-center border-bottom px-3 py-2 active_user\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"user-img\",children:[\" \",/*#__PURE__*/_jsx(\"img\",{src:\"https://img.icons8.com/color/36/000000/administrator-male.png\",alt:\"user\",className:\"img-fluid rounded-circle\",width:\"40px\"}),\" \",/*#__PURE__*/_jsx(\"span\",{className:\"profile-status away float-right\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-75 d-inline-block v-middle pl-2\",children:[/*#__PURE__*/_jsx(\"h6\",{className:\"message-title mb-0 mt-1\",children:value.name}),/*#__PURE__*/_jsx(\"span\",{className:\"font-12 text-nowrap d-block text-muted text-truncate\",children:\"Online\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-12 text-nowrap d-block text-muted\",children:\"9:08AM\"})]})]},value._id);}))})})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-lg-9  col-xl-10\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"chat-box scrollable position-relative\",style:{height:\"calc(100vh - 111px)\"},children:/*#__PURE__*/_jsx(\"ul\",{className:\"chat-list list-style-none px-3 pt-3\",children:message&&(message===null||message===void 0?void 0:(_message$content=message.content)===null||_message$content===void 0?void 0:_message$content.map(function(value,index){return value.isAdmin?/*#__PURE__*/_jsx(\"li\",{className:\"chat-item odd list-style-none mt-3 text-right\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"chat-content text-right d-inline-block pl-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"box msg p-2 d-inline-block mb-1\",children:[\"You: \",value.message]}),/*#__PURE__*/_jsx(\"br\",{})]})},\"admin_\".concat(index)):/*#__PURE__*/_jsxs(\"li\",{className:\"chat-item list-style-none mt-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"chat-img d-inline-block\",children:/*#__PURE__*/_jsx(\"img\",{src:\"https://img.icons8.com/color/36/000000/administrator-male.png\",alt:\"user\",className:\"rounded-circle\",width:\"45\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat-content d-inline-block pl-3\",children:[/*#__PURE__*/_jsx(\"h6\",{className:\"font-weight-medium\",children:value.name}),/*#__PURE__*/_jsx(\"div\",{className:\"msg p-2 d-inline-block mb-1\",children:value.message})]}),/*#__PURE__*/_jsx(\"div\",{className:\"chat-time d-block font-10 mt-1 mr-0 mb-3\"})]},\"user_\".concat(index));}))})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body border-top\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-9\",children:/*#__PURE__*/_jsx(\"div\",{className:\"input-field mt-0 mb-0\",children:/*#__PURE__*/_jsx(\"input\",{id:\"textarea1\",placeholder:\"Type and enter\",className:\"form-control border-0\",type:\"text\",onChange:onChangeText,value:textMessage})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-3\",children:/*#__PURE__*/_jsx(\"a\",{className:\"btn-circle btn-lg btn-cyan float-right text-white\",onClick:handleSend,children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-paper-plane\"})})})]})})]})]})})})})}),/*#__PURE__*/_jsxs(\"footer\",{className:\"footer text-center\",children:[\"All Rights Reserved by Adminmart. Designed and Developed by\",\" \",/*#__PURE__*/_jsx(\"a\",{href:\"https://www.facebook.com/KimTien.9920/\",children:\"Tien Kim\"}),\".\"]})]});}export default Chat;","map":{"version":3,"sources":["/Volumes/document/GitHub/ASM3/Frontend Assignment 03/admin_shop/src/Chat/Chat.jsx"],"names":["React","useEffect","useRef","useState","socketIOClient","MessengerAPI","axios","host","Chat","message","setMessage","textMessage","setTextMessage","roomlist","setRoomslist","load","setLoad","id","setid","socketRef","fetchData","get","res","data","console","error","onChangeText","e","target","value","fetchMessageData","getMessageId","response","handleIdUser","connectToSocket","current","connect","on","disconnect","handleSend","trim","content","name","localStorage","getItem","isAdmin","emit","height","map","id_user","_id","index"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\r\nimport socketIOClient from \"socket.io-client\";\r\nimport MessengerAPI from \"../API/MessengerAPI\";\r\nimport \"./Chat.css\";\r\nimport axios from \"axios\";\r\n\r\nconst host = \"https://asm3-be-4qtm.onrender.com/\";\r\n\r\nfunction Chat() {\r\n  const [message, setMessage] = useState([]);\r\n  const [textMessage, setTextMessage] = useState(\"\");\r\n  const [roomlist, setRoomslist] = useState([]);\r\n  const [load, setLoad] = useState(false);\r\n  const [id, setid] = useState(\"\");\r\n\r\n  const socketRef = useRef();\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const res = await axios.get(`${host}/mess/get/all`);\r\n        setRoomslist(res.data);\r\n      } catch (error) {\r\n        console.error(\"Error fetching data:\", error);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, []);\r\n\r\n  const onChangeText = (e) => {\r\n    setTextMessage(e.target.value);\r\n  };\r\n\r\n  const fetchMessageData = async (value) => {\r\n    try {\r\n      const response = await MessengerAPI.getMessageId(value || id);\r\n      setMessage(response.data);\r\n    } catch (error) {\r\n      console.error(\"Error fetching messages:\", error);\r\n    }\r\n  };\r\n\r\n  const handleIdUser = (value) => {\r\n    connectToSocket();\r\n    setid(value);\r\n    fetchMessageData(value);\r\n  };\r\n\r\n  const connectToSocket = () => {\r\n    socketRef.current = socketIOClient.connect(host);\r\n\r\n    socketRef.current.on(\"receive_message\", () => {\r\n      setLoad(true);\r\n    });\r\n\r\n    return () => {\r\n      socketRef.current.disconnect();\r\n    };\r\n  };\r\n\r\n  const handleSend = () => {\r\n    if (socketRef.current && textMessage.trim() !== \"\") {\r\n      const value = {\r\n        content: textMessage,\r\n        id: id,\r\n        name: localStorage.getItem(\"name_user\"),\r\n        isAdmin: true,\r\n      };\r\n      socketRef.current.emit(\"send_message\", value);\r\n      setTextMessage(\"\");\r\n      setLoad(true);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchMessageData();\r\n    setLoad(false);\r\n  }, [load]);\r\n\r\n  return (\r\n    <div className=\"page-wrapper\">\r\n      <div className=\"page-breadcrumb\">\r\n        <div className=\"row\">\r\n          <div className=\"col-7 align-self-center\">\r\n            <h4 className=\"page-title text-truncate text-dark font-weight-medium mb-1\">\r\n              Chat\r\n            </h4>\r\n            <div className=\"d-flex align-items-center\">\r\n              <nav aria-label=\"breadcrumb\">\r\n                <ol className=\"breadcrumb m-0 p-0\">\r\n                  <li\r\n                    className=\"breadcrumb-item text-muted active\"\r\n                    aria-current=\"page\"\r\n                  >\r\n                    Apps\r\n                  </li>\r\n                  <li\r\n                    className=\"breadcrumb-item text-muted\"\r\n                    aria-current=\"page\"\r\n                  >\r\n                    Chat\r\n                  </li>\r\n                </ol>\r\n              </nav>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"container-fluid\">\r\n        <div className=\"row\">\r\n          <div className=\"col-md-12\">\r\n            <div className=\"card\">\r\n              <div className=\"row no-gutters\">\r\n                <div className=\"col-lg-3 col-xl-2 border-right\">\r\n                  <div className=\"card-body border-bottom\">\r\n                    <form>\r\n                      <input\r\n                        className=\"form-control\"\r\n                        type=\"text\"\r\n                        placeholder=\"Search Contact\"\r\n                      />\r\n                    </form>\r\n                  </div>\r\n                  <div\r\n                    className=\"scrollable position-relative\"\r\n                    style={{ height: \"calc(80vh - 100px)\" }}\r\n                  >\r\n                    <ul className=\"mailbox list-style-none\">\r\n                      <li>\r\n                        <div className=\"message-center\">\r\n                          {roomlist &&\r\n                            roomlist?.map((value) => (\r\n                              <a\r\n                                key={value._id}\r\n                                onClick={() => handleIdUser(value.id_user)}\r\n                                className=\"message-item d-flex align-items-center border-bottom px-3 py-2 active_user\"\r\n                              >\r\n                                <div className=\"user-img\">\r\n                                  {\" \"}\r\n                                  <img\r\n                                    src=\"https://img.icons8.com/color/36/000000/administrator-male.png\"\r\n                                    alt=\"user\"\r\n                                    className=\"img-fluid rounded-circle\"\r\n                                    width=\"40px\"\r\n                                  />{\" \"}\r\n                                  <span className=\"profile-status away float-right\"></span>\r\n                                </div>\r\n                                <div className=\"w-75 d-inline-block v-middle pl-2\">\r\n                                  <h6 className=\"message-title mb-0 mt-1\">\r\n                                    {value.name}\r\n                                  </h6>\r\n                                  <span className=\"font-12 text-nowrap d-block text-muted text-truncate\">\r\n                                    Online\r\n                                  </span>\r\n                                  <span className=\"font-12 text-nowrap d-block text-muted\">\r\n                                    9:08AM\r\n                                  </span>\r\n                                </div>\r\n                              </a>\r\n                            ))}\r\n                        </div>\r\n                      </li>\r\n                    </ul>\r\n                  </div>\r\n                </div>\r\n                <div className=\"col-lg-9  col-xl-10\">\r\n                  <div\r\n                    className=\"chat-box scrollable position-relative\"\r\n                    style={{ height: \"calc(100vh - 111px)\" }}\r\n                  >\r\n                    <ul className=\"chat-list list-style-none px-3 pt-3\">\r\n                      {message &&\r\n                        message?.content?.map((value, index) =>\r\n                          value.isAdmin ? (\r\n                            <li\r\n                              className=\"chat-item odd list-style-none mt-3 text-right\"\r\n                              key={`admin_${index}`}\r\n                            >\r\n                              <div className=\"chat-content text-right d-inline-block pl-3\">\r\n                                <div className=\"box msg p-2 d-inline-block mb-1\">\r\n                                  You: {value.message}\r\n                                </div>\r\n                                <br />\r\n                              </div>\r\n                            </li>\r\n                          ) : (\r\n                            <li\r\n                              className=\"chat-item list-style-none mt-3\"\r\n                              key={`user_${index}`}\r\n                            >\r\n                              <div className=\"chat-img d-inline-block\">\r\n                                <img\r\n                                  src=\"https://img.icons8.com/color/36/000000/administrator-male.png\"\r\n                                  alt=\"user\"\r\n                                  className=\"rounded-circle\"\r\n                                  width=\"45\"\r\n                                />\r\n                              </div>\r\n                              <div className=\"chat-content d-inline-block pl-3\">\r\n                                <h6 className=\"font-weight-medium\">\r\n                                  {value.name}\r\n                                </h6>\r\n                                <div className=\"msg p-2 d-inline-block mb-1\">\r\n                                  {value.message}\r\n                                </div>\r\n                              </div>\r\n                              <div className=\"chat-time d-block font-10 mt-1 mr-0 mb-3\"></div>\r\n                            </li>\r\n                          )\r\n                        )}\r\n                    </ul>\r\n                  </div>\r\n                  <div className=\"card-body border-top\">\r\n                    <div className=\"row\">\r\n                      <div className=\"col-9\">\r\n                        <div className=\"input-field mt-0 mb-0\">\r\n                          <input\r\n                            id=\"textarea1\"\r\n                            placeholder=\"Type and enter\"\r\n                            className=\"form-control border-0\"\r\n                            type=\"text\"\r\n                            onChange={onChangeText}\r\n                            value={textMessage}\r\n                          />\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"col-3\">\r\n                        <a\r\n                          className=\"btn-circle btn-lg btn-cyan float-right text-white\"\r\n                          onClick={handleSend}\r\n                        >\r\n                          <i className=\"fas fa-paper-plane\"></i>\r\n                        </a>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <footer className=\"footer text-center\">\r\n        All Rights Reserved by Adminmart. Designed and Developed by{\" \"}\r\n        <a href=\"https://www.facebook.com/KimTien.9920/\">Tien Kim</a>.\r\n      </footer>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Chat;\r\n"]},"metadata":{},"sourceType":"module"}