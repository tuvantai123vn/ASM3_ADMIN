{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"/Volumes/document/GitHub/ASM3/Frontend Assignment 03/admin_shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Volumes/document/GitHub/ASM3/Frontend Assignment 03/admin_shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Volumes/document/GitHub/ASM3/Frontend Assignment 03/admin_shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{useHistory,Redirect}from\"react-router-dom\";import\"./Login.css\";import UserAPI from\"../API/UserAPI\";import{createBrowserHistory}from\"history\";import{useCookies}from\"react-cookie\";function Login(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var history=createBrowserHistory();var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),load=_useState6[0],setLoad=_useState6[1];var _useCookies=useCookies([\"accessToken\"]),_useCookies2=_slicedToArray(_useCookies,2),cookies=_useCookies2[0],setCookie=_useCookies2[1];var onChangeEmail=function onChangeEmail(e){setEmail(e.target.value);};var onChangePassword=function onChangePassword(e){setPassword(e.target.value);};var onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var user,responseData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;user={email:email,password:password};_context.next=4;return UserAPI.postSignUpAdmin(user);case 4:responseData=_context.sent;if(responseData.statusText===\"OK\"){console.log(\"responseData\",responseData);setCookie('accessToken',responseData.data);console.log(cookies);history.push(\"/home\");window.location.reload();setLoad(true);}_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function onSubmit(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"page-wrapper\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"page-breadcrumb\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"login\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"heading\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Sign in\"}),/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-group input-group-lg\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"input-group-addon\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-user\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Email\",value:email,onChange:onChangeEmail})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group input-group-lg\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"input-group-addon\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-lock\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",placeholder:\"Password\",value:password,onChange:onChangePassword})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"float\",onClick:onSubmit,children:\"Login\"})]})]})})})}),load&&/*#__PURE__*/_jsx(Redirect,{to:\"/home\"})]});}export default Login;","map":{"version":3,"sources":["/Volumes/document/GitHub/ASM3/Frontend Assignment 03/admin_shop/src/Login/Login.jsx"],"names":["React","useState","useEffect","useHistory","Redirect","UserAPI","createBrowserHistory","useCookies","Login","email","setEmail","password","setPassword","history","load","setLoad","cookies","setCookie","onChangeEmail","e","target","value","onChangePassword","onSubmit","user","postSignUpAdmin","responseData","statusText","console","log","data","push","window","location","reload"],"mappings":"unBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,UAAT,CAAqBC,QAArB,KAAqC,kBAArC,CACA,MAAO,aAAP,CACA,MAAOC,CAAAA,OAAP,KAAoB,gBAApB,CACA,OAASC,oBAAT,KAAqC,SAArC,CACA,OAASC,UAAT,KAA2B,cAA3B,CAEA,QAASC,CAAAA,KAAT,EAAiB,eACWP,QAAQ,CAAC,EAAD,CADnB,wCACRQ,KADQ,eACDC,QADC,8BAEiBT,QAAQ,CAAC,EAAD,CAFzB,yCAERU,QAFQ,eAEEC,WAFF,eAGf,GAAMC,CAAAA,OAAO,CAAGP,oBAAoB,EAApC,CAHe,eAISL,QAAQ,CAAC,KAAD,CAJjB,yCAIRa,IAJQ,eAIFC,OAJE,+BAKcR,UAAU,CAAC,CAAC,aAAD,CAAD,CALxB,4CAKRS,OALQ,iBAKCC,SALD,iBAMf,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,CAAD,CAAO,CAC3BT,QAAQ,CAACS,CAAC,CAACC,MAAF,CAASC,KAAV,CAAR,CACD,CAFD,CAIA,GAAMC,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAACH,CAAD,CAAO,CAC9BP,WAAW,CAACO,CAAC,CAACC,MAAF,CAASC,KAAV,CAAX,CACD,CAFD,CAIA,GAAME,CAAAA,QAAQ,0FAAG,yKAEPC,IAFO,CAEA,CACXf,KAAK,CAALA,KADW,CAEXE,QAAQ,CAARA,QAFW,CAFA,uBAMcN,CAAAA,OAAO,CAACoB,eAAR,CAAwBD,IAAxB,CANd,QAMPE,YANO,eAOb,GAAIA,YAAY,CAACC,UAAb,GAA4B,IAAhC,CAAsC,CACpCC,OAAO,CAACC,GAAR,CAAY,cAAZ,CAA4BH,YAA5B,EACAT,SAAS,CAAC,aAAD,CAAeS,YAAY,CAACI,IAA5B,CAAT,CACAF,OAAO,CAACC,GAAR,CAAYb,OAAZ,EACAH,OAAO,CAACkB,IAAR,CAAa,OAAb,EACAC,MAAM,CAACC,QAAP,CAAgBC,MAAhB,GACAnB,OAAO,CAAC,IAAD,CAAP,CACD,CAdY,+EAgBba,OAAO,CAACC,GAAR,cAhBa,oEAAH,kBAARN,CAAAA,QAAQ,0CAAd,CAoBA,mBACE,aAAK,SAAS,CAAC,cAAf,wBACE,YAAK,SAAS,CAAC,iBAAf,uBACE,YAAK,SAAS,CAAC,KAAf,uBACE,YAAK,SAAS,CAAC,OAAf,uBACE,aAAK,SAAS,CAAC,SAAf,wBACE,+BADF,cAEE,qCACE,aAAK,SAAS,CAAC,4BAAf,wBACE,aAAM,SAAS,CAAC,mBAAhB,uBACE,UAAG,SAAS,CAAC,YAAb,EADF,EADF,cAIE,cACE,IAAI,CAAC,MADP,CAEE,SAAS,CAAC,cAFZ,CAGE,WAAW,CAAC,OAHd,CAIE,KAAK,CAAEd,KAJT,CAKE,QAAQ,CAAES,aALZ,EAJF,GADF,cAcE,aAAK,SAAS,CAAC,4BAAf,wBACE,aAAM,SAAS,CAAC,mBAAhB,uBACE,UAAG,SAAS,CAAC,YAAb,EADF,EADF,cAIE,cACE,IAAI,CAAC,UADP,CAEE,SAAS,CAAC,cAFZ,CAGE,WAAW,CAAC,UAHd,CAIE,KAAK,CAAEP,QAJT,CAKE,QAAQ,CAAEW,gBALZ,EAJF,GAdF,cA2BE,eAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,OAAhC,CAAwC,OAAO,CAAEC,QAAjD,mBA3BF,GAFF,GADF,EADF,EADF,EADF,CAyCGT,IAAI,eAAI,KAAC,QAAD,EAAU,EAAE,CAAC,OAAb,EAzCX,GADF,CA6CD,CAED,cAAeN,CAAAA,KAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useHistory, Redirect } from \"react-router-dom\";\nimport \"./Login.css\";\nimport UserAPI from \"../API/UserAPI\";\nimport { createBrowserHistory } from \"history\";\nimport { useCookies } from \"react-cookie\";\n\nfunction Login() {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const history = createBrowserHistory();\n  const [load, setLoad] = useState(false);\n  const [cookies, setCookie] = useCookies([\"accessToken\"]);\n  const onChangeEmail = (e) => {\n    setEmail(e.target.value);\n  };\n\n  const onChangePassword = (e) => {\n    setPassword(e.target.value);\n  };\n\n  const onSubmit = async () => {\n    try {\n      const user = {\n        email,\n        password,\n      };\n      const responseData = await UserAPI.postSignUpAdmin(user);\n      if (responseData.statusText === \"OK\") {\n        console.log(\"responseData\", responseData);\n        setCookie('accessToken',responseData.data);\n        console.log(cookies);\n        history.push(\"/home\");\n        window.location.reload() \n        setLoad(true);\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  return (\n    <div className=\"page-wrapper\">\n      <div className=\"page-breadcrumb\">\n        <div className=\"row\">\n          <div className=\"login\">\n            <div className=\"heading\">\n              <h2>Sign in</h2>\n              <form>\n                <div className=\"input-group input-group-lg\">\n                  <span className=\"input-group-addon\">\n                    <i className=\"fa fa-user\"></i>\n                  </span>\n                  <input\n                    type=\"text\"\n                    className=\"form-control\"\n                    placeholder=\"Email\"\n                    value={email}\n                    onChange={onChangeEmail}\n                  />\n                </div>\n\n                <div className=\"input-group input-group-lg\">\n                  <span className=\"input-group-addon\">\n                    <i className=\"fa fa-lock\"></i>\n                  </span>\n                  <input\n                    type=\"password\"\n                    className=\"form-control\"\n                    placeholder=\"Password\"\n                    value={password}\n                    onChange={onChangePassword}\n                  />\n                </div>\n\n                <button type=\"button\" className=\"float\" onClick={onSubmit}>\n                  Login\n                </button>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n      {load && <Redirect to='/home'/>}\n    </div>\n  );\n}\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}