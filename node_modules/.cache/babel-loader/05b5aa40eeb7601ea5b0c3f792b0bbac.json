{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"/Volumes/document/GitHub/ASM3/Frontend Assignment 03/admin_shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Volumes/document/GitHub/ASM3/Frontend Assignment 03/admin_shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Volumes/document/GitHub/ASM3/Frontend Assignment 03/admin_shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import ProductAPI from\"../API/ProductAPI\";import{useHistory}from\"react-router-dom\";var NewProduct=function NewProduct(){var history=useHistory();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),selectedImages=_useState2[0],setSelectedImages=_useState2[1];var handleImageSelection=function handleImageSelection(event){setSelectedImages(Array.from(event.target.files));};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var _event$target$element,productName,category,shortDescription,longDescription,price,formData,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();_context.prev=1;_event$target$element=event.target.elements,productName=_event$target$element.productName,category=_event$target$element.category,shortDescription=_event$target$element.shortDescription,longDescription=_event$target$element.longDescription,price=_event$target$element.price;formData=new FormData();formData.append(\"name\",productName.value);formData.append(\"category\",category.value);formData.append(\"short_desc\",shortDescription.value);formData.append(\"long_desc\",longDescription.value);formData.append(\"price\",price.value);selectedImages.forEach(function(image){formData.append(\"image\",image,image.name);});_context.next=12;return ProductAPI.postNewProduct(formData);case 12:response=_context.sent;console.log(response);//nếu thành công dùng react router dom chuyển về trang /products\nhistory.push(\"/products\");_context.next=20;break;case 17:_context.prev=17;_context.t0=_context[\"catch\"](1);console.error(_context.t0);case 20:case\"end\":return _context.stop();}}},_callee,null,[[1,17]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"page-wrapper\",children:/*#__PURE__*/_jsx(\"div\",{className:\"page-breadcrumb\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"form\",{style:{width:\"50%\",marginLeft:\"40px\"},onSubmit:handleSubmit,encType:\"multipart/form-data\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Product Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Enter Product Name\",name:\"productName\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Category\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Enter Category\",name:\"category\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Short Description\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control\",rows:\"3\",placeholder:\"Enter Short Description\",name:\"shortDescription\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Long Description\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control\",rows:\"6\",placeholder:\"Enter Long Description\",name:\"longDescription\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Price\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control\",placeholder:\"Enter Price\",name:\"price\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"exampleFormControlFile1\",children:\"Upload image (4 images)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",className:\"form-control-file\",id:\"exampleFormControlFile1\",name:\"images\",multiple:true,onChange:handleImageSelection})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:\"Submit\"})]})})})});};export default NewProduct;","map":{"version":3,"sources":["/Volumes/document/GitHub/ASM3/Frontend Assignment 03/admin_shop/src/New/NewProduct.jsx"],"names":["React","useState","ProductAPI","useHistory","NewProduct","history","selectedImages","setSelectedImages","handleImageSelection","event","Array","from","target","files","handleSubmit","preventDefault","elements","productName","category","shortDescription","longDescription","price","formData","FormData","append","value","forEach","image","name","postNewProduct","response","console","log","push","error","width","marginLeft"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport ProductAPI from \"../API/ProductAPI\";\nimport { useHistory } from \"react-router-dom\";\n\nconst NewProduct = () => {\n  const history = useHistory();\n  const [selectedImages, setSelectedImages] = useState([]);\n\n  const handleImageSelection = (event) => {\n    setSelectedImages(Array.from(event.target.files));\n  };\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n\n    try {\n      const { productName, category, shortDescription, longDescription, price } = event.target.elements;\n\n      const formData = new FormData();\n      formData.append(\"name\", productName.value);\n      formData.append(\"category\", category.value);\n      formData.append(\"short_desc\", shortDescription.value);\n      formData.append(\"long_desc\", longDescription.value);\n      formData.append(\"price\", price.value);\n\n      selectedImages.forEach((image) => {\n        formData.append(\"image\", image, image.name);\n      });\n\n      const response = await ProductAPI.postNewProduct(formData);\n      console.log(response); //nếu thành công dùng react router dom chuyển về trang /products\n      history.push(\"/products\");\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  return (\n    <div className=\"page-wrapper\">\n      <div className=\"page-breadcrumb\">\n        <div className=\"row\">\n          <form\n            style={{ width: \"50%\", marginLeft: \"40px\" }}\n            onSubmit={handleSubmit}\n            encType=\"multipart/form-data\"\n          >\n            <div className=\"form-group\">\n              <label>Product Name</label>\n              <input\n                type=\"text\"\n                className=\"form-control\"\n                placeholder=\"Enter Product Name\"\n                name=\"productName\"\n              />\n            </div>\n            <div className=\"form-group\">\n              <label>Category</label>\n              <input\n                type=\"text\"\n                className=\"form-control\"\n                placeholder=\"Enter Category\"\n                name=\"category\"\n              />\n            </div>\n            <div className=\"form-group\">\n              <label>Short Description</label>\n              <textarea\n                className=\"form-control\"\n                rows=\"3\"\n                placeholder=\"Enter Short Description\"\n                name=\"shortDescription\"\n              ></textarea>\n            </div>\n            <div className=\"form-group\">\n              <label>Long Description</label>\n              <textarea\n                className=\"form-control\"\n                rows=\"6\"\n                placeholder=\"Enter Long Description\"\n                name=\"longDescription\"\n              ></textarea>\n            </div>\n            <div className=\"form-group\">\n              <label>Price</label>\n              <input\n                type=\"number\"\n                className=\"form-control\"\n                placeholder=\"Enter Price\"\n                name=\"price\"\n              />\n            </div>\n            <div className=\"form-group\">\n              <label htmlFor=\"exampleFormControlFile1\">\n                Upload image (4 images)\n              </label>\n              <input\n                type=\"file\"\n                className=\"form-control-file\"\n                id=\"exampleFormControlFile1\"\n                name=\"images\"\n                multiple={true}\n                onChange={handleImageSelection}\n              />\n            </div>\n            <button type=\"submit\" className=\"btn btn-primary\">\n              Submit\n            </button>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default NewProduct;\n"]},"metadata":{},"sourceType":"module"}