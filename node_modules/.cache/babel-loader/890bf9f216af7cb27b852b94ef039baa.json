{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"/Volumes/document/GitHub/ASM3/Frontend Assignment 03/admin_shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Volumes/document/GitHub/ASM3/Frontend Assignment 03/admin_shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Volumes/document/GitHub/ASM3/Frontend Assignment 03/admin_shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import queryString from\"query-string\";import ProductAPI from\"../API/ProductAPI\";import Pagination from\"./Component/Pagination\";import{useHistory}from\"react-router-dom\";import{Modal,ModalHeader,ModalBody,ModalFooter,Button}from\"reactstrap\";function Products(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),products=_useState2[0],setProducts=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),temp=_useState4[0],setTemp=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),results=_useState6[0],setResults=_useState6[1];var history=useHistory();var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isDeleteModalOpen=_useState8[0],setIsDeleteModalOpen=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),productToDeleteId=_useState10[0],setProductToDeleteId=_useState10[1];var toggleDeleteModal=function toggleDeleteModal(){setIsDeleteModalOpen(!isDeleteModalOpen);};var handleDeleteClick=function handleDeleteClick(productId){setProductToDeleteId(productId);toggleDeleteModal();};var confirmDelete=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return ProductAPI.delete(productToDeleteId);case 2:// Sau khi xóa thành công, bạn có thể cập nhật lại danh sách sản phẩm hoặc thực hiện các tương tác khác\ntoggleDeleteModal();history.replace(\"/products\");case 4:case\"end\":return _context.stop();}}},_callee);}));return function confirmDelete(){return _ref.apply(this,arguments);};}();var _useState11=useState({page:\"1\",count:\"8\",search:\"\",category:\"all\"}),_useState12=_slicedToArray(_useState11,2),pagination=_useState12[0],setPagination=_useState12[1];var onChangeText=function onChangeText(e){var value=e.target.value;if(!value){setProducts(temp);return;}var searchProducts=temp.filter(function(item){return item.name.toUpperCase().indexOf(value.toUpperCase())!==-1;});setProducts(searchProducts);};//Tổng số trang\nvar _useState13=useState(),_useState14=_slicedToArray(_useState13,2),totalPage=_useState14[0],setTotalPage=_useState14[1];//Hàm này dùng để thay đổi state pagination.page\n//Nó sẽ truyền xuống Component con và nhận dữ liệu từ Component con truyền lên\nvar handlerChangePage=function handlerChangePage(value){console.log(\"value\",value);setPagination({page:value,count:pagination.count,category:pagination.category});};useEffect(function(){var fetchAllData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var params,query,newQuery,products,resultsNumber,totalPa;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:// Nếu mà category === 'all' thì nó sẽ gọi hàm get tất cả sản phẩm\n// Ngược lại thì nó sẽ gọi hàm pagination và phân loại sản phẩm\nparams={page:pagination.page,count:pagination.count,search:pagination.search,category:pagination.category};query=queryString.stringify(params);newQuery=\"?\"+query;_context2.next=5;return ProductAPI.getPagination(newQuery);case 5:products=_context2.sent;resultsNumber=parseInt(products.data.totalCount);setResults(resultsNumber);setProducts(products.data.products);setTemp(products.data.products);//Tính tổng số trang = tổng số sản phẩm / số lượng sản phẩm 1 trang\ntotalPa=Math.ceil(parseInt(products.data.products.length)/parseInt(pagination.count))+1;setTotalPage(totalPa);case 12:case\"end\":return _context2.stop();}}},_callee2);}));return function fetchAllData(){return _ref2.apply(this,arguments);};}();fetchAllData();},[pagination]);return/*#__PURE__*/_jsxs(\"div\",{className:\"page-wrapper\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"page-breadcrumb\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-7 align-self-center\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"page-title text-truncate text-dark font-weight-medium mb-1\",children:\"Basic Initialisation\"}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex align-items-center\",children:/*#__PURE__*/_jsx(\"nav\",{\"aria-label\":\"breadcrumb\",children:/*#__PURE__*/_jsxs(\"ol\",{className:\"breadcrumb m-0 p-0\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"breadcrumb-item\",children:/*#__PURE__*/_jsx(\"a\",{href:\"/\",className:\"text-muted\",children:\"Home\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"breadcrumb-item text-muted active\",\"aria-current\":\"page\",children:\"Table\"})]})})})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"card-title\",children:\"Products\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-control w-25\",onChange:onChangeText,type:\"text\",placeholder:\"Enter Search!\"}),/*#__PURE__*/_jsx(\"a\",{href:\"/new\",style:{cursor:\"pointer\",color:\"white\"},className:\"btn btn-success\",children:\"Create Product\"})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"table-responsive\",children:[/*#__PURE__*/_jsxs(\"table\",{className:\"table table-striped table-bordered no-wrap\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Price\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Image\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Category\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Edit\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:products&&(products===null||products===void 0?void 0:products.map(function(value){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:value._id}),/*#__PURE__*/_jsx(\"td\",{children:value.name}),/*#__PURE__*/_jsx(\"td\",{children:value.price}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"img\",{src:value.img1,style:{height:\"60px\",width:\"60px\"},alt:\"\"})}),/*#__PURE__*/_jsx(\"td\",{children:value.category}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"a\",{href:\"/products/view-edit/\".concat(value._id),style:{cursor:\"pointer\",color:\"white\"},className:\"btn btn-success\",children:\"Update\"}),\"\\xA0\",/*#__PURE__*/_jsx(\"a\",{onClick:function onClick(){return handleDeleteClick(value._id);}// Sử dụng hàm xử lý xóa khi nhấp vào nút \"Delete\"\n,style:{cursor:\"pointer\",color:\"white\"},className:\"btn btn-danger\",children:\"Delete\"})]})]},value._id);}))})]}),/*#__PURE__*/_jsx(Pagination,{pagination:pagination,handlerChangePage:handlerChangePage,totalPage:totalPage,results:results})]})]})})})})}),/*#__PURE__*/_jsxs(Modal,{isOpen:isDeleteModalOpen,toggle:toggleDeleteModal,children:[/*#__PURE__*/_jsx(ModalHeader,{toggle:toggleDeleteModal,children:\"Confirm Delete\"}),/*#__PURE__*/_jsx(ModalBody,{children:\"Are you sure you want to delete this product?\"}),/*#__PURE__*/_jsxs(ModalFooter,{children:[/*#__PURE__*/_jsx(Button,{color:\"danger\",onClick:confirmDelete,children:\"Delete\"}),/*#__PURE__*/_jsx(Button,{color:\"secondary\",onClick:toggleDeleteModal,children:\"Cancel\"})]})]}),/*#__PURE__*/_jsxs(\"footer\",{className:\"footer text-center text-muted\",children:[\"All Rights Reserved by Adminmart. Designed and Developed by\",\" \",/*#__PURE__*/_jsx(\"a\",{href:\"https://www.facebook.com/KimTien.9920/\",children:\"Ti\\u1EC1n Kim\"}),\".\"]})]});}export default Products;","map":{"version":3,"sources":["/Volumes/document/GitHub/ASM3/Frontend Assignment 03/admin_shop/src/Products/Products.jsx"],"names":["React","useEffect","useState","queryString","ProductAPI","Pagination","useHistory","Modal","ModalHeader","ModalBody","ModalFooter","Button","Products","props","products","setProducts","temp","setTemp","results","setResults","history","isDeleteModalOpen","setIsDeleteModalOpen","productToDeleteId","setProductToDeleteId","toggleDeleteModal","handleDeleteClick","productId","confirmDelete","delete","replace","page","count","search","category","pagination","setPagination","onChangeText","e","value","target","searchProducts","filter","item","name","toUpperCase","indexOf","totalPage","setTotalPage","handlerChangePage","console","log","fetchAllData","params","query","stringify","newQuery","getPagination","resultsNumber","parseInt","data","totalCount","totalPa","Math","ceil","length","cursor","color","map","_id","price","img1","height","width"],"mappings":"unBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,WAAP,KAAwB,cAAxB,CACA,MAAOC,CAAAA,UAAP,KAAuB,mBAAvB,CACA,MAAOC,CAAAA,UAAP,KAAuB,wBAAvB,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,OAASC,KAAT,CAAgBC,WAAhB,CAA6BC,SAA7B,CAAwCC,WAAxC,CAAqDC,MAArD,KAAmE,YAAnE,CAEA,QAASC,CAAAA,QAAT,CAAkBC,KAAlB,CAAyB,eACSX,QAAQ,CAAC,EAAD,CADjB,wCAChBY,QADgB,eACNC,WADM,8BAECb,QAAQ,CAAC,EAAD,CAFT,yCAEhBc,IAFgB,eAEVC,OAFU,8BAGOf,QAAQ,CAAC,EAAD,CAHf,yCAGhBgB,OAHgB,eAGPC,UAHO,eAIvB,GAAMC,CAAAA,OAAO,CAAGd,UAAU,EAA1B,CAJuB,eAM2BJ,QAAQ,CAAC,KAAD,CANnC,yCAMhBmB,iBANgB,eAMGC,oBANH,8BAO2BpB,QAAQ,CAAC,EAAD,CAPnC,0CAOhBqB,iBAPgB,gBAOGC,oBAPH,gBASvB,GAAMC,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,EAAM,CAC9BH,oBAAoB,CAAC,CAACD,iBAAF,CAApB,CACD,CAFD,CAIA,GAAMK,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,CAACC,SAAD,CAAe,CACvCH,oBAAoB,CAACG,SAAD,CAApB,CACAF,iBAAiB,GAClB,CAHD,CAKA,GAAMG,CAAAA,aAAa,0FAAG,yJACdxB,CAAAA,UAAU,CAACyB,MAAX,CAAkBN,iBAAlB,CADc,QAEpB;AACAE,iBAAiB,GACjBL,OAAO,CAACU,OAAR,CAAgB,WAAhB,EAJoB,sDAAH,kBAAbF,CAAAA,aAAa,0CAAnB,CAlBuB,gBAyBa1B,QAAQ,CAAC,CAC3C6B,IAAI,CAAE,GADqC,CAE3CC,KAAK,CAAE,GAFoC,CAG3CC,MAAM,CAAE,EAHmC,CAI3CC,QAAQ,CAAE,KAJiC,CAAD,CAzBrB,2CAyBhBC,UAzBgB,gBAyBJC,aAzBI,gBAgCvB,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,CAAD,CAAO,CAC1B,GAAMC,CAAAA,KAAK,CAAGD,CAAC,CAACE,MAAF,CAASD,KAAvB,CACA,GAAI,CAACA,KAAL,CAAY,CACVxB,WAAW,CAACC,IAAD,CAAX,CACA,OACD,CACD,GAAMyB,CAAAA,cAAc,CAAGzB,IAAI,CAAC0B,MAAL,CACrB,SAACC,IAAD,QAAUA,CAAAA,IAAI,CAACC,IAAL,CAAUC,WAAV,GAAwBC,OAAxB,CAAgCP,KAAK,CAACM,WAAN,EAAhC,IAAyD,CAAC,CAApE,EADqB,CAAvB,CAGA9B,WAAW,CAAC0B,cAAD,CAAX,CACD,CAVD,CAYA;AA5CuB,gBA6CWvC,QAAQ,EA7CnB,2CA6ChB6C,SA7CgB,gBA6CLC,YA7CK,gBA+CvB;AACA;AACA,GAAMC,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,CAACV,KAAD,CAAW,CACnCW,OAAO,CAACC,GAAR,CAAY,OAAZ,CAAqBZ,KAArB,EACAH,aAAa,CAAC,CACZL,IAAI,CAAEQ,KADM,CAEZP,KAAK,CAAEG,UAAU,CAACH,KAFN,CAGZE,QAAQ,CAAEC,UAAU,CAACD,QAHT,CAAD,CAAb,CAKD,CAPD,CASAjC,SAAS,CAAC,UAAM,CACd,GAAMmD,CAAAA,YAAY,2FAAG,iMACnB;AACA;AACMC,MAHa,CAGJ,CACbtB,IAAI,CAAEI,UAAU,CAACJ,IADJ,CAEbC,KAAK,CAAEG,UAAU,CAACH,KAFL,CAGbC,MAAM,CAAEE,UAAU,CAACF,MAHN,CAIbC,QAAQ,CAAEC,UAAU,CAACD,QAJR,CAHI,CAUboB,KAVa,CAULnD,WAAW,CAACoD,SAAZ,CAAsBF,MAAtB,CAVK,CAYbG,QAZa,CAYF,IAAMF,KAZJ,wBAcIlD,CAAAA,UAAU,CAACqD,aAAX,CAAyBD,QAAzB,CAdJ,QAcb1C,QAda,gBAeb4C,aAfa,CAeGC,QAAQ,CAAC7C,QAAQ,CAAC8C,IAAT,CAAcC,UAAf,CAfX,CAiBnB1C,UAAU,CAACuC,aAAD,CAAV,CACA3C,WAAW,CAACD,QAAQ,CAAC8C,IAAT,CAAc9C,QAAf,CAAX,CACAG,OAAO,CAACH,QAAQ,CAAC8C,IAAT,CAAc9C,QAAf,CAAP,CAEA;AAEMgD,OAvBa,CAwBjBC,IAAI,CAACC,IAAL,CACEL,QAAQ,CAAC7C,QAAQ,CAAC8C,IAAT,CAAc9C,QAAd,CAAuBmD,MAAxB,CAAR,CAA0CN,QAAQ,CAACxB,UAAU,CAACH,KAAZ,CADpD,EAEI,CA1Ba,CA2BnBgB,YAAY,CAACc,OAAD,CAAZ,CA3BmB,yDAAH,kBAAZV,CAAAA,YAAY,2CAAlB,CA6BAA,YAAY,GACb,CA/BQ,CA+BN,CAACjB,UAAD,CA/BM,CAAT,CAiCA,mBACE,aAAK,SAAS,CAAC,cAAf,wBACE,YAAK,SAAS,CAAC,iBAAf,uBACE,YAAK,SAAS,CAAC,KAAf,uBACE,aAAK,SAAS,CAAC,yBAAf,wBACE,WAAI,SAAS,CAAC,4DAAd,kCADF,cAIE,YAAK,SAAS,CAAC,2BAAf,uBACE,YAAK,aAAW,YAAhB,uBACE,YAAI,SAAS,CAAC,oBAAd,wBACE,WAAI,SAAS,CAAC,iBAAd,uBACE,UAAG,IAAI,CAAC,GAAR,CAAY,SAAS,CAAC,YAAtB,kBADF,EADF,cAME,WACE,SAAS,CAAC,mCADZ,CAEE,eAAa,MAFf,mBANF,GADF,EADF,EAJF,GADF,EADF,EADF,cA2BE,YAAK,SAAS,CAAC,iBAAf,uBACE,YAAK,SAAS,CAAC,KAAf,uBACE,YAAK,SAAS,CAAC,QAAf,uBACE,YAAK,SAAS,CAAC,MAAf,uBACE,aAAK,SAAS,CAAC,WAAf,wBACE,WAAI,SAAS,CAAC,YAAd,sBADF,cAEE,aAAK,SAAS,CAAC,gCAAf,wBACE,cACE,SAAS,CAAC,mBADZ,CAEE,QAAQ,CAAEE,YAFZ,CAGE,IAAI,CAAC,MAHP,CAIE,WAAW,CAAC,eAJd,EADF,cAOE,UACE,IAAI,CAAE,MADR,CAEE,KAAK,CAAE,CAAE6B,MAAM,CAAE,SAAV,CAAqBC,KAAK,CAAE,OAA5B,CAFT,CAGE,SAAS,CAAC,iBAHZ,4BAPF,GAFF,cAkBE,aAlBF,cAmBE,aAAK,SAAS,CAAC,kBAAf,wBACE,eAAO,SAAS,CAAC,4CAAjB,wBACE,oCACE,mCACE,0BADF,cAEE,4BAFF,cAGE,6BAHF,cAIE,6BAJF,cAKE,gCALF,cAME,4BANF,GADF,EADF,cAWE,uBACGrD,QAAQ,GACPA,QADO,SACPA,QADO,iBACPA,QAAQ,CAAEsD,GAAV,CAAc,SAAC7B,KAAD,qBACZ,mCACE,oBAAKA,KAAK,CAAC8B,GAAX,EADF,cAEE,oBAAK9B,KAAK,CAACK,IAAX,EAFF,cAGE,oBAAKL,KAAK,CAAC+B,KAAX,EAHF,cAIE,iCACE,YACE,GAAG,CAAE/B,KAAK,CAACgC,IADb,CAEE,KAAK,CAAE,CAAEC,MAAM,CAAE,MAAV,CAAkBC,KAAK,CAAE,MAAzB,CAFT,CAGE,GAAG,CAAC,EAHN,EADF,EAJF,cAWE,oBAAKlC,KAAK,CAACL,QAAX,EAXF,cAYE,mCACE,UACE,IAAI,+BAAyBK,KAAK,CAAC8B,GAA/B,CADN,CAEE,KAAK,CAAE,CAAEH,MAAM,CAAE,SAAV,CAAqBC,KAAK,CAAE,OAA5B,CAFT,CAGE,SAAS,CAAC,iBAHZ,oBADF,qBASE,UACE,OAAO,CAAE,yBAAMzC,CAAAA,iBAAiB,CAACa,KAAK,CAAC8B,GAAP,CAAvB,EAAoC;AAD/C,CAEE,KAAK,CAAE,CACLH,MAAM,CAAE,SADH,CAELC,KAAK,CAAE,OAFF,CAFT,CAME,SAAS,CAAC,gBANZ,oBATF,GAZF,GAAS5B,KAAK,CAAC8B,GAAf,CADY,EAAd,CADO,CADX,EAXF,GADF,cAmDE,KAAC,UAAD,EACE,UAAU,CAAElC,UADd,CAEE,iBAAiB,CAAEc,iBAFrB,CAGE,SAAS,CAAEF,SAHb,CAIE,OAAO,CAAE7B,OAJX,EAnDF,GAnBF,GADF,EADF,EADF,EADF,EA3BF,cAiHE,MAAC,KAAD,EAAO,MAAM,CAAEG,iBAAf,CAAkC,MAAM,CAAEI,iBAA1C,wBACE,KAAC,WAAD,EAAa,MAAM,CAAEA,iBAArB,4BADF,cAEE,KAAC,SAAD,4DAFF,cAGE,MAAC,WAAD,yBACE,KAAC,MAAD,EAAQ,KAAK,CAAC,QAAd,CAAuB,OAAO,CAAEG,aAAhC,oBADF,cAIE,KAAC,MAAD,EAAQ,KAAK,CAAC,WAAd,CAA0B,OAAO,CAAEH,iBAAnC,oBAJF,GAHF,GAjHF,cA6HE,gBAAQ,SAAS,CAAC,+BAAlB,yEAC8D,GAD9D,cAEE,UAAG,IAAI,CAAC,wCAAR,2BAFF,OA7HF,GADF,CAoID,CAED,cAAeb,CAAAA,QAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport queryString from \"query-string\";\r\nimport ProductAPI from \"../API/ProductAPI\";\r\nimport Pagination from \"./Component/Pagination\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from \"reactstrap\";\r\n\r\nfunction Products(props) {\r\n  const [products, setProducts] = useState([]);\r\n  const [temp, setTemp] = useState([]);\r\n  const [results, setResults] = useState(\"\");\r\n  const history = useHistory();\r\n\r\n  const [isDeleteModalOpen, setIsDeleteModalOpen] = useState(false);\r\n  const [productToDeleteId, setProductToDeleteId] = useState(\"\");\r\n\r\n  const toggleDeleteModal = () => {\r\n    setIsDeleteModalOpen(!isDeleteModalOpen);\r\n  };\r\n\r\n  const handleDeleteClick = (productId) => {\r\n    setProductToDeleteId(productId);\r\n    toggleDeleteModal();\r\n  };\r\n\r\n  const confirmDelete = async () => {\r\n    await ProductAPI.delete(productToDeleteId);\r\n    // Sau khi xóa thành công, bạn có thể cập nhật lại danh sách sản phẩm hoặc thực hiện các tương tác khác\r\n    toggleDeleteModal();\r\n    history.replace(\"/products\");\r\n  };\r\n\r\n  const [pagination, setPagination] = useState({\r\n    page: \"1\",\r\n    count: \"8\",\r\n    search: \"\",\r\n    category: \"all\",\r\n  });\r\n\r\n  const onChangeText = (e) => {\r\n    const value = e.target.value;\r\n    if (!value) {\r\n      setProducts(temp);\r\n      return;\r\n    }\r\n    const searchProducts = temp.filter(\r\n      (item) => item.name.toUpperCase().indexOf(value.toUpperCase()) !== -1\r\n    );\r\n    setProducts(searchProducts);\r\n  };\r\n\r\n  //Tổng số trang\r\n  const [totalPage, setTotalPage] = useState();\r\n\r\n  //Hàm này dùng để thay đổi state pagination.page\r\n  //Nó sẽ truyền xuống Component con và nhận dữ liệu từ Component con truyền lên\r\n  const handlerChangePage = (value) => {\r\n    console.log(\"value\", value);\r\n    setPagination({\r\n      page: value,\r\n      count: pagination.count,\r\n      category: pagination.category,\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    const fetchAllData = async () => {\r\n      // Nếu mà category === 'all' thì nó sẽ gọi hàm get tất cả sản phẩm\r\n      // Ngược lại thì nó sẽ gọi hàm pagination và phân loại sản phẩm\r\n      const params = {\r\n        page: pagination.page,\r\n        count: pagination.count,\r\n        search: pagination.search,\r\n        category: pagination.category,\r\n      };\r\n\r\n      const query = queryString.stringify(params);\r\n\r\n      const newQuery = \"?\" + query;\r\n\r\n      const products = await ProductAPI.getPagination(newQuery);\r\n      const resultsNumber = parseInt(products.data.totalCount);\r\n\r\n      setResults(resultsNumber);\r\n      setProducts(products.data.products);\r\n      setTemp(products.data.products);\r\n\r\n      //Tính tổng số trang = tổng số sản phẩm / số lượng sản phẩm 1 trang\r\n\r\n      const totalPa =\r\n        Math.ceil(\r\n          parseInt(products.data.products.length) / parseInt(pagination.count)\r\n        ) + 1;\r\n      setTotalPage(totalPa);\r\n    };\r\n    fetchAllData();\r\n  }, [pagination]);\r\n\r\n  return (\r\n    <div className=\"page-wrapper\">\r\n      <div className=\"page-breadcrumb\">\r\n        <div className=\"row\">\r\n          <div className=\"col-7 align-self-center\">\r\n            <h4 className=\"page-title text-truncate text-dark font-weight-medium mb-1\">\r\n              Basic Initialisation\r\n            </h4>\r\n            <div className=\"d-flex align-items-center\">\r\n              <nav aria-label=\"breadcrumb\">\r\n                <ol className=\"breadcrumb m-0 p-0\">\r\n                  <li className=\"breadcrumb-item\">\r\n                    <a href=\"/\" className=\"text-muted\">\r\n                      Home\r\n                    </a>\r\n                  </li>\r\n                  <li\r\n                    className=\"breadcrumb-item text-muted active\"\r\n                    aria-current=\"page\"\r\n                  >\r\n                    Table\r\n                  </li>\r\n                </ol>\r\n              </nav>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"container-fluid\">\r\n        <div className=\"row\">\r\n          <div className=\"col-12\">\r\n            <div className=\"card\">\r\n              <div className=\"card-body\">\r\n                <h4 className=\"card-title\">Products</h4>\r\n                <div className=\"d-flex justify-content-between\">\r\n                  <input\r\n                    className=\"form-control w-25\"\r\n                    onChange={onChangeText}\r\n                    type=\"text\"\r\n                    placeholder=\"Enter Search!\"\r\n                  />\r\n                  <a\r\n                    href={\"/new\"}\r\n                    style={{ cursor: \"pointer\", color: \"white\" }}\r\n                    className=\"btn btn-success\"\r\n                  >\r\n                    Create Product\r\n                  </a>\r\n                </div>\r\n\r\n                <br />\r\n                <div className=\"table-responsive\">\r\n                  <table className=\"table table-striped table-bordered no-wrap\">\r\n                    <thead>\r\n                      <tr>\r\n                        <th>ID</th>\r\n                        <th>Name</th>\r\n                        <th>Price</th>\r\n                        <th>Image</th>\r\n                        <th>Category</th>\r\n                        <th>Edit</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {products &&\r\n                        products?.map((value) => (\r\n                          <tr key={value._id}>\r\n                            <td>{value._id}</td>\r\n                            <td>{value.name}</td>\r\n                            <td>{value.price}</td>\r\n                            <td>\r\n                              <img\r\n                                src={value.img1}\r\n                                style={{ height: \"60px\", width: \"60px\" }}\r\n                                alt=\"\"\r\n                              />\r\n                            </td>\r\n                            <td>{value.category}</td>\r\n                            <td>\r\n                              <a\r\n                                href={`/products/view-edit/${value._id}`}\r\n                                style={{ cursor: \"pointer\", color: \"white\" }}\r\n                                className=\"btn btn-success\"\r\n                              >\r\n                                Update\r\n                              </a>\r\n                              &nbsp;\r\n                              <a\r\n                                onClick={() => handleDeleteClick(value._id)} // Sử dụng hàm xử lý xóa khi nhấp vào nút \"Delete\"\r\n                                style={{\r\n                                  cursor: \"pointer\",\r\n                                  color: \"white\",\r\n                                }}\r\n                                className=\"btn btn-danger\"\r\n                              >\r\n                                Delete\r\n                              </a>\r\n                            </td>\r\n                          </tr>\r\n                        ))}\r\n                    </tbody>\r\n                  </table>\r\n                  <Pagination\r\n                    pagination={pagination}\r\n                    handlerChangePage={handlerChangePage}\r\n                    totalPage={totalPage}\r\n                    results={results}\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <Modal isOpen={isDeleteModalOpen} toggle={toggleDeleteModal}>\r\n        <ModalHeader toggle={toggleDeleteModal}>Confirm Delete</ModalHeader>\r\n        <ModalBody>Are you sure you want to delete this product?</ModalBody>\r\n        <ModalFooter>\r\n          <Button color=\"danger\" onClick={confirmDelete}>\r\n            Delete\r\n          </Button>\r\n          <Button color=\"secondary\" onClick={toggleDeleteModal}>\r\n            Cancel\r\n          </Button>\r\n        </ModalFooter>\r\n      </Modal>\r\n      <footer className=\"footer text-center text-muted\">\r\n        All Rights Reserved by Adminmart. Designed and Developed by{\" \"}\r\n        <a href=\"https://www.facebook.com/KimTien.9920/\">Tiền Kim</a>.\r\n      </footer>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Products;\r\n"]},"metadata":{},"sourceType":"module"}